

# as vagrant, test
sudo tsocks apt-get update

# as vagrant user, create mock, public SOCKS connection
ssh-keygen -t rsa -b 4096 -N '' -f ~/.ssh/id_rsa
cat ~/.ssh/id_rsa.pub >> ~/.ssh/authorized_keys 
ssh -o StrictHostKeyChecking=no -o UserKnownHostsFile=/dev/null -o GSSAPIAuthentication=no -f -N -D '*:5000' localhost

# as vagrant, configure tsocks
sudo cp -a /etc/tsocks.conf /etc/tsocks.conf.orig &&
sudo cp -a /etc/tsocks.conf.mock /etc/tsocks.conf

# as vagrant, test
sudo tsocks apt-get update

